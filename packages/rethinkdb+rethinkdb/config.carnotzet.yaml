data:
  configure: |-
    !cd <THIS.DATA.RULES.LOCATION>
      && CXXFLAGS="$CXXFLAGS $(pkg-config jemalloc zlib protobuf openssl libcurl --static --cflags)"
         LDFLAGS="$LDFLAGS $(pkg-config jemalloc zlib protobuf openssl libcurl --static --libs)"
         ./configure --prefix=<PEON.INSTALLDIR>/var/aarch64-linux/rootfs/usr
                     --static=all
                     --dynamic=none
                     --lib-path=<PEON.PROD.ROOTDIR>/usr/lib
                     --ccache
  rules:
    args:
      makeall: '-j<PEON.CPUS.COUNT>'
    env:
      CC: aarch64-linux-gcc
      CXX: aarch64-linux-g++
  deploy: |-
    !cp <PEON.INSTALLDIR>/var/aarch64-linux/rootfs/usr/bin/rethinkdb
        <PEON.INSTALLDIR>/var/aarch64-linux/rootfs/usr/bin/rethinkdb_d
       && aarch64-linux-strip -s <PEON.INSTALLDIR>/var/aarch64-linux/rootfs/usr/bin/rethinkdb
